# Unbroken - Tactical Barbell Tracker

Unbroken is a Svelte 5 + TypeScript Progressive Web App (PWA) built with Vite for tracking Tactical Barbell workouts. It features workout tracking, rest timers, exercise database, and training block templates. The app is deployed on Cloudflare Pages.

Always reference these instructions first and fallback to search or bash commands only when you encounter unexpected information that does not match the info here.

## Working Effectively

### Bootstrap, Build, and Test
- Install dependencies: `npm install` -- takes 45 seconds. NEVER CANCEL. Set timeout to 60+ seconds.
- Run linting: `npm run lint` -- takes 1.5 seconds. Set timeout to 30+ seconds.
- Run type checking: `npm run type-check` -- takes 2 seconds. Set timeout to 30+ seconds.
- Build for production: `npm run build` -- takes 6.5 seconds. NEVER CANCEL. Set timeout to 30+ seconds.
- Fix linting issues: `npm run lint:fix` -- takes 1.5 seconds. Set timeout to 30+ seconds.

### Run the Application
- ALWAYS run `npm install` first if working with a fresh clone.
- Development server: `npm run dev` -- starts in <1 second, serves on http://localhost:5173
- Preview production build: `npm run preview` -- serves production build on http://localhost:4173

### Validation
- ALWAYS manually validate any new code by testing complete workout scenarios.
- Test the primary workout flow: Start app → Click "Start Today's Workout" → Complete at least one set → Verify rest timer appears → Test weight adjustments.
- ALWAYS test at least one complete end-to-end workout scenario after making changes.
- Test on development server (npm run dev) for iterative changes.
- Always run `npm run lint && npm run type-check && npm run build` before you are done or the CI (.github/workflows/ci.yml) will fail.

## Validation Scenarios

After making changes, always test these key scenarios:

1. **Workout Flow Validation**:
   - Start development server: `npm run dev`
   - Access http://localhost:5173
   - Click "Start Today's Workout" button
   - Complete at least one exercise set by clicking the checkmark button
   - Verify rest timer appears and counts down properly
   - Test weight adjustment using spinbutton controls
   - Verify "Complete Workout" functionality works

2. **Navigation Validation**:
   - Test all tab navigation (overview, workout, history, settings)
   - Verify training block information displays correctly
   - Check that current block and upcoming blocks show properly

3. **Build Pipeline Validation**:
   - Ensure `npm run build` completes successfully
   - Verify dist/ directory is created with proper assets
   - Test production preview with `npm run preview`

## Common Tasks

### Repository Structure
```
.
├── .github/                     # GitHub Actions workflows (CI/CD)
├── .eslintrc.cjs               # ESLint configuration
├── dist/                       # Build output (generated by npm run build)
├── index.html                  # HTML template with PWA meta tags
├── package.json               # Dependencies and scripts
├── postcss.config.js          # PostCSS configuration for Tailwind
├── public/                    # Static assets (icons, favicons)
├── src/                       # Source code
│   ├── App.svelte             # Main application component
│   ├── blockTemplates.ts      # Training block templates and configurations
│   ├── components/            # Svelte components (StrengthWorkouts, CardioWorkouts, etc.)
│   ├── app.css                # Global styles with Tailwind CSS
│   ├── main.ts                # Entry point
│   ├── storage.ts             # LocalStorage utilities
│   ├── types.ts               # TypeScript type definitions
│   └── utils.ts               # Shared utility functions (weight calculations, notifications)
├── tailwind.config.js         # Tailwind CSS configuration
├── tsconfig.json              # TypeScript configuration
├── vite.config.ts             # Vite configuration with PWA plugin
├── svelte.config.js           # Svelte configuration
└── wrangler.jsonc             # Cloudflare Pages configuration
```

### Key Components and Files
- `src/blockTemplates.ts` - Core training block configurations (endurance, powerbuilding, strength blocks)
- `src/components/StrengthWorkouts.svelte` - Main workout interface with rest timers and set tracking
- `src/types.ts` - All TypeScript interfaces and types for workouts, exercises, and app state
- `src/utils.ts` - Weight calculations, notifications, and utility functions
- `src/storage.ts` - LocalStorage persistence for app state and workout history

### Framework and Technology Stack
- **Svelte 5** with TypeScript and runes for reactive state management
- **Vite** for build tooling and development server
- **Tailwind CSS** for styling (utility-first CSS framework)
- **PWA** capabilities via vite-plugin-pwa
- **Lucide Svelte** for icons
- **ESLint** for code quality with Svelte plugin
- **Cloudflare Pages** for deployment

### Prerequisites
- Node.js 18.0.0 or higher (currently uses Node.js 20+)
- npm (comes with Node.js)

### CI/CD Pipeline
The repository includes GitHub Actions workflow (`.github/workflows/ci.yml`) that runs on every push and pull request:
- **Linting**: ESLint checks for code quality (includes Svelte components)
- **Type Checking**: Svelte type checking validates components and TypeScript
- **Build**: Ensures the project builds successfully
- **Artifact Upload**: Stores build output for review

### Working with Workout Templates
- Training blocks are defined in `src/blockTemplates.ts`
- Each block contains weeks, and each week contains days with different workout types
- Workout types include: strength, liss (cardio), hiit, rest, deload, hypertrophy
- Exercise database and one-rep max calculations are handled in components and utils

### Styling and Customization
- Uses Tailwind CSS utility classes for styling
- Custom styles can be added to `src/app.css`
- Tailwind configuration in `tailwind.config.js`
- PWA theming configured in `vite.config.ts` and `index.html`

### Common Command Outputs

#### ls -la (repo root)
```
.eslintrc.cjs
.git/
.github/
.gitignore
README.md
index.html
package-lock.json
package.json
postcss.config.js
public/
src/
svelte.config.js
tailwind.config.js
tsconfig.json
tsconfig.node.json
vite.config.ts
wrangler.jsonc
```

#### package.json scripts
```json
{
  "dev": "vite",
  "build": "vite build", 
  "preview": "vite preview",
  "lint": "eslint . --ext ts,js,svelte --report-unused-disable-directives --max-warnings 0",
  "lint:fix": "eslint . --ext ts,js,svelte --fix",
  "type-check": "svelte-check --tsconfig tsconfig.json"
}
```

### Environment and Dependencies
- No additional SDKs required beyond Node.js 18+
- All dependencies are managed via npm and defined in package.json
- Build outputs to `dist/` directory
- Development server runs on http://localhost:5173
- Production preview runs on http://localhost:4173

### Timing Expectations
- `npm install`: ~45 seconds
- `npm run build`: ~6.5 seconds total (Vite build with Svelte compilation)
- `npm run lint`: ~1.5 seconds
- `npm run type-check`: ~2 seconds (svelte-check)
- `npm run dev`: <1 second to start server

### Known Issues and Warnings
- TypeScript version warning in ESLint (does not affect functionality)
- Various npm deprecation warnings during install (do not affect build or runtime)
- Svelte 5 is stable but some third-party libraries may not yet support runes syntax